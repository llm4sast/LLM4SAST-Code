The null check is broken since it will throw a NullPointerException itself. It is likely that you used || instead of && or vice versa.