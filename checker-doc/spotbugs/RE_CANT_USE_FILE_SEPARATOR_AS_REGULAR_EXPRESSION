The code uses File.separator where a regular expression is required. It will fail on Windows platforms, where the File.separator is a backslash, which is interpreted in a regular expression as an escape character. Among other options, you can just use File.separatorChar=='\\' ? "\\\\" : File.separator instead of File.separator.